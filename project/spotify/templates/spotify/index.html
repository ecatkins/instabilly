{%extends 'spotify/base.html' %}
{% load staticfiles %}
{% block js %}
    <script src="{% static 'spotify/timeline.js' %}"> </script>
    <script src="{% static 'spotify/django_ajax.js' %}"> </script>
{% endblock %}


{% block content %}
    <div class="col-md-3">
        <h4>Please hit sync to let us download your library</h4>
        <div id="sync-library">
            <button id='sync'>Sync</button>
            <div id="loading"></div>
        </div>
        <p><a id='engine' href="/engine">Recommendation Engine</a></p>
        <p><a id='logout' href="/logout">Logout</a></p>
    </div>

    <div class="col-md-3">
        <h4>What's on your mind?</h4>
        <form id="songsearch" action="search" method="GET">
            {% csrf_token %}
            <p><textarea id="comment" rows="4" cols="30"></textarea></p>
            <p>Include a song from your library <input type="text" name="search_query"> <button id="song-search-button">search</button></p>
            <input type="submit" value="Post it!" data-toggle="modal" data-target="#myModal">
        </form>
        <div id="searchresult"><ul id="searchresult_list"></ul></div>
    </div>

    <div class="col-md-3">
        <h4>MINI-FEED</h4>
        <div id="mini-feed"></div>
    </div>

    <div class="col-md-3">
        <h4>ALL USERS</h4>
        {% if user_list %}
            <ul>
            {% for user in user_list %}
                <li id="{{ user }}-button">{{ user }}<button class="btn followButton">follow</button></li>
            {% endfor %}
            </ul>
        {% endif %}
    </div>

    <div id="myModal" class="modal fade" role="dialog">
        <div class="modal-dialog">
        <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Creating post...</h4>
                </div>
                <div class="modal-body">
                    <p id="song-reference"></p>
                    <p id="song-comment"></p>
                </div>
                <div class="modal-footer">
                    <button id="modal-button" type="button" class="btn btn-default" data-dismiss="modal">Do it!</button>
                </div>
            </div>
        </div>
    </div>       
{% endblock %}
